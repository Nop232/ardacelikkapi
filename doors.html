<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kapılarımız - Arda Çelik Kapı</title>
  <link rel="stylesheet" href="prepage.css">
  <link rel="stylesheet" href="doors.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container">
      <div class="navbar">
        <div class="logo-text">
          <h2>Arda Çelik Kapı</h2>
        </div>
        <nav>
          <ul>
            <li><a href="contact.html">İletişim</a></li>
            <li><a href="sepetim.html">Sepetim</a></li>
            <li><a href="menu.html">Ana Sayfa</a></li>
            <li><a href="accountsettings.html">Hesap Ayarları</a></li>
            <li id="usernameDisplay">Kullanıcı</li>
            <div class="below_content">
              <div class="dark-mode">
                <i id="fa-moon" class="fa-solid fa-moon"></i>
              </div>
            </div>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <!-- Showcase -->
  <main>
    <div class="container">
      <h2 class="page-title">Kapılarımız</h2>
      <p class="page-desc">Aşağıdaki kapılarımızdan dilediğiniz kapıyı seçebilir ve sipariş verebilirsiniz.</p>

      <div class="doors-grid">
        <!-- Ürün Kartı -->
        <div class="door-card">
          <img src="Images/door_image.jpg" alt="Modern Kapı">
          <h3>Modern Çelik Kapı</h3>
          <p class="price">₺4.500</p>
          <button>Sepete Ekle</button>
        </div>

        <div class="door-card">
          <img src="Images/door_image.jpg" alt="Ahşap Kapı">
          <h3>Ahşap Görünümlü Kapı</h3>
          <p class="price">₺5.200</p>
          <button>Sepete Ekle</button>
        </div>

        <div class="door-card">
          <img src="Images/door_image.jpg" alt="Lüks Kapı">
          <h3>Lüks Çelik Kapı</h3>
          <p class="price">₺7.800</p>
          <button>Sepete Ekle</button>
        </div>

        <div class="door-card">
          <img src="Images/door_image.jpg" alt="Minimal Kapı">
          <h3>Minimal Tasarım Kapı</h3>
          <p class="price">₺3.900</p>
          <button>Sepete Ekle</button>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <p>© 2025 Arda Çelik Kapı | Tüm hakları saklıdır.</p>
      <p>Bu web sitesi <a href="https://spaceship.com" target="_blank">SpaceShip</a> üzerinden alınan alan adı ile yayınlanmaktadır.</p>
    </div>
  </footer>

  <!-- Dark Mode -->
  <script>
    const bodyEl = document.querySelector('body');
    const moonIcon = document.getElementById("fa-moon");

    if(localStorage.getItem('darkMode') === 'true'){
      bodyEl.classList.add('dark');
    }

    moonIcon.addEventListener('click', () => {
      bodyEl.classList.toggle('dark');
      localStorage.setItem('darkMode', bodyEl.classList.contains('dark'));
    });
  </script>


  <script>
const addButtons = document.querySelectorAll('.door-card button');

function getCart(){ return JSON.parse(localStorage.getItem('cart') || '[]'); }
function setCart(cart){ localStorage.setItem('cart', JSON.stringify(cart)); }

addButtons.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const card = btn.parentElement;
    const title = card.querySelector('h3').innerText;
    const priceText = card.querySelector('.price').innerText
      .replace('₺','')
      .replace(/\./g,'') // binlik ayırıcı
      .replace(/,/g,'');
    const price = Number(priceText);
    const img = card.querySelector('img').getAttribute('src'); // burası önemli!
    const id = title.replace(/\s/g,'').toLowerCase();

    let cart = getCart();
    const existing = cart.find(x=>x.id===id);
    if(existing){
      existing.qty +=1;
    } else {
      cart.push({id, title, price, img, qty:1}); // img de kaydediyoruz
    }
    setCart(cart);
    alert(`${title} sepete eklendi!`);
  });
});
</script>




  <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDw1ibYg2xGcbF1azF09JUSYMnfhQDySHg",
            authDomain: "ardacelikkapi-adcfb.firebaseapp.com",
            projectId: "ardacelikkapi-adcfb",
            storageBucket: "ardacelikkapi-adcfb.firebasestorage.app",
            messagingSenderId: "436173086063",
            appId: "1:436173086063:web:45b125b911b4a168a8dc9a",
            measurementId: "G-YRFLQJW6EP"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        onAuthStateChanged(auth, async (user) => {
    if(user){
        const docRef = doc(db, "users", user.uid);
        const docSnap = await getDoc(docRef);

        if(docSnap.exists()){
            const userData = docSnap.data();

            // Navbar
            document.getElementById("usernameDisplay").innerText = userData.username || "Unknown";

            // Showcase
            const showUsername = document.getElementById("showUsername");
            if(showUsername){
                showUsername.innerText = userData.username || "Kullanıcı";
            }
        } else {
            console.log("Firestore'da kullanıcı bilgisi yok!");
        }
    } else {
        console.log("Kullanıcı giriş yapmamış!");
        // window.location.href = "index.html";
    }
});




    </script>

    

    
</body>
</html>
